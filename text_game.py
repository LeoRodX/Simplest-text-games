def start_game():
    print("Вы просыпаетесь в тёмной комнате. Вы не помните, как здесь оказались.")
    print("Перед вами две двери: левая и правая. Какую дверь вы выберете?")

    choice = input("Введите 'левая' или 'правая': ")

    if choice == "левая":
        dragon_room()
    elif choice == "правая":
        trap_room()
    else:
        print("Вы выбрали неизвестное действие и остались в комнате навсегда.")
        end_game()


def dragon_room():
    print("\nВы заходите в комнату и видите огромного дракона.")
    print("Дракон предлагает вам два варианта: 1) сыграть в игру или 2) сразиться с ним.")

    choice = input("Введите '1' чтобы сыграть или '2' чтобы сразиться: ")

    if choice == "1":
        print("Вы играли в крестики-нолики и победили дракона! Он подарил вам сокровище!")
        end_game()
    elif choice == "2":
        print("Дракон оказался слишком сильным и вы проиграли.")
        end_game()
    else:
        print("Вы не смогли принять решение и дракон съел вас.")
        end_game()


def trap_room():
    print("\nВы заходите в комнату и попадаете в ловушку!")
    print("Пол под вами начинает проваливаться!")

    choice = input("Быстро! Введите 'прыгать' чтобы попытаться выжить: ")

    if choice == "прыгать":
        print("Вы увернулись от проваливающегося пола и нашли выход!")
        end_game()
    else:
        print("Вы не успели и упали в яму.")
        end_game()


def end_game():
    print("\nКонец игры!")
    replay = input("Хотите начать сначала? (да/нет): ")
    if replay == "да":
        start_game()
    else:
        print("Спасибо за игру!")


start_game()
